RewriteEngine On
RewriteBase /

# Basic redirect to the application
RewriteRule ^$ current/public/index.php [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ current/public/index.php/$1 [QSA,L]

# Enable symlinks and set options
Options +FollowSymLinks
Options -MultiViews
Options -Indexes

# Set base directory
RewriteBase /

# Redirect root to current/public
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^$ current/public/ [L]

# Handle all other requests
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ current/public/index.php/$1 [QSA,L]

# Set directory permissions
<Directory "/data01/virt118436/domeenid/www.tak22parnoja.itmajakas.ee/hajusrakendused">
    Require all granted
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

# Set default directory index
DirectoryIndex index.php

# Allow access to all
<IfModule mod_authz_core.c>
    Require all granted
</IfModule>
<IfModule !mod_authz_core.c>
    Allow from all
</IfModule>

# Enable directory listing
Options +FollowSymLinks
Options -Indexes

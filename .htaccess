RewriteEngine On
RewriteBase /

# Redirect root to the application
RewriteRule ^$ /current/public/index.php [L]

# Redirect to remove /public/index.php
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+current/public/index\.php/([^\s]*) [NC]
RewriteRule ^ %1 [R=301,L]

# Handle front controller
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ current/public/index.php/$1 [L]

# Set default directory index
DirectoryIndex index.php

# Allow access to all
<IfModule mod_authz_core.c>
    Require all granted
</IfModule>
<IfModule !mod_authz_core.c>
    Allow from all
</IfModule>

# Enable directory listing
Options +FollowSymLinks
Options -Indexes
